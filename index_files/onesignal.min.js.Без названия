"use strict";"https:"===window.location.protocol&&fetch("/modules/core/onesignal/onesignalController.php?getSettings").then(e=>e.json()).then(e=>{if(Object.keys(e).length){const n=window.OneSignal||[];n.push(()=>{n.isPushNotificationsSupported()&&(n.init({appId:e.all_browsers,safari_web_id:e.safari,autoResubscribe:!0}),n.showNativePrompt(),n.getUserId().then(n=>{if(null!==n){let o=new FormData;o.append("crmPlayerUpdate",!0),o.append("oneSignalDeviceID",n),o.append("oneSignalAppID",e.all_browsers),fetch("/modules/core/onesignal/onesignalController.php",{method:"POST",headers:new Headers,body:o}).then(e=>e.json()).then(e=>{})}}),n.on("subscriptionChange",(function(o){n.getUserId().then(n=>{if(null!==n){let t=new FormData;t.append("oneSignalCRMupdate",!0),t.append("oneSignalDeviceID",n),t.append("oneSignalSubscribed",o),t.append("oneSignalAppID",e.all_browsers),fetch("/modules/core/onesignal/onesignalController.php",{method:"POST",headers:new Headers,body:t}).then(e=>e.json()).then(e=>{})}})})))})}});